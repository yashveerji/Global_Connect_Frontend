{"ast":null,"code":"// ✅ src/store/userSlice.js\nimport{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";// 🔁 Replace with your actual backend base URL\nconst API=\"https://global-connect-p93z.onrender.com/api\";// 🔐 Register User\nexport const registerUser=createAsyncThunk(\"user/register\",async(userData,thunkAPI)=>{try{const res=await axios.post(`${API}/auth/register`,userData);return res.data;}catch(err){var _err$response,_err$response$data;return thunkAPI.rejectWithValue(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||\"Registration failed\");}});// 🔐 Login User\nexport const loginUser=createAsyncThunk(\"user/login\",async(credentials,thunkAPI)=>{try{const res=await axios.post(`${API}/auth/login`,credentials);localStorage.setItem(\"token\",res.data.token);localStorage.setItem(\"user\",JSON.stringify(res.data.user));// ✅ save user\nreturn res.data;}catch(err){var _err$response2,_err$response2$data;return thunkAPI.rejectWithValue(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.msg)||\"Login failed\");}});// 🔁 Slice\nconst userSlice=createSlice({name:\"user\",initialState:{user:JSON.parse(localStorage.getItem(\"user\"))||null,token:localStorage.getItem(\"token\")||null,loading:false,error:null},reducers:{// ✅ Restore login on refresh\nloginUserSuccess:(state,action)=>{state.user=action.payload.user;state.token=action.payload.token;},logout:state=>{state.user=null;state.token=null;localStorage.removeItem(\"token\");localStorage.removeItem(\"user\");}},extraReducers:builder=>{builder.addCase(registerUser.pending,state=>{state.loading=true;state.error=null;}).addCase(registerUser.fulfilled,(state,action)=>{state.loading=false;state.user=action.payload.user;}).addCase(registerUser.rejected,(state,action)=>{state.loading=false;state.error=action.payload;}).addCase(loginUser.pending,state=>{state.loading=true;state.error=null;}).addCase(loginUser.fulfilled,(state,action)=>{state.loading=false;state.user=action.payload.user;state.token=action.payload.token;}).addCase(loginUser.rejected,(state,action)=>{state.loading=false;state.error=action.payload;});}});export const{logout,loginUserSuccess}=userSlice.actions;export default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","API","registerUser","userData","thunkAPI","res","post","data","err","_err$response","_err$response$data","rejectWithValue","response","msg","loginUser","credentials","localStorage","setItem","token","JSON","stringify","user","_err$response2","_err$response2$data","userSlice","name","initialState","parse","getItem","loading","error","reducers","loginUserSuccess","state","action","payload","logout","removeItem","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["C:/Users/yashv/OneDrive/Desktop/Internshipmini2/Global_Connect/Global_Connect/frontend/src/store/userSlice.js"],"sourcesContent":["// ✅ src/store/userSlice.js\r\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\n// 🔁 Replace with your actual backend base URL\r\nconst API = \"https://global-connect-p93z.onrender.com/api\";\r\n\r\n// 🔐 Register User\r\nexport const registerUser = createAsyncThunk(\r\n  \"user/register\",\r\n  async (userData, thunkAPI) => {\r\n    try {\r\n      const res = await axios.post(`${API}/auth/register`, userData);\r\n      return res.data;\r\n    } catch (err) {\r\n      return thunkAPI.rejectWithValue(err.response?.data?.msg || \"Registration failed\");\r\n    }\r\n  }\r\n);\r\n\r\n// 🔐 Login User\r\nexport const loginUser = createAsyncThunk(\r\n  \"user/login\",\r\n  async (credentials, thunkAPI) => {\r\n    try {\r\n      const res = await axios.post(`${API}/auth/login`, credentials);\r\n      localStorage.setItem(\"token\", res.data.token);\r\n      localStorage.setItem(\"user\", JSON.stringify(res.data.user)); // ✅ save user\r\n      return res.data;\r\n    } catch (err) {\r\n      return thunkAPI.rejectWithValue(err.response?.data?.msg || \"Login failed\");\r\n    }\r\n  }\r\n);\r\n\r\n// 🔁 Slice\r\nconst userSlice = createSlice({\r\n  name: \"user\",\r\n  initialState: {\r\n    user: JSON.parse(localStorage.getItem(\"user\")) || null,\r\n    token: localStorage.getItem(\"token\") || null,\r\n    loading: false,\r\n    error: null,\r\n  },\r\n  reducers: {\r\n    // ✅ Restore login on refresh\r\n    loginUserSuccess: (state, action) => {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n    },\r\n    logout: (state) => {\r\n      state.user = null;\r\n      state.token = null;\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"user\");\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(registerUser.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(registerUser.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.user = action.payload.user;\r\n      })\r\n      .addCase(registerUser.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n      .addCase(loginUser.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(loginUser.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.user = action.payload.user;\r\n        state.token = action.payload.token;\r\n      })\r\n      .addCase(loginUser.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { logout, loginUserSuccess } = userSlice.actions;\r\nexport default userSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}